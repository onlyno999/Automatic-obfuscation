const a0O=a0b;(function(a,b){const N=a0b,c=a();while(!![]){try{const d=-parseInt(N(0xfe))/0x1+-parseInt(N(0xd5))/0x2+-parseInt(N(0x10b))/0x3+-parseInt(N(0xe4))/0x4*(parseInt(N(0xbe))/0x5)+parseInt(N(0xd9))/0x6*(parseInt(N(0xc9))/0x7)+-parseInt(N(0xf5))/0x8*(-parseInt(N(0x128))/0x9)+-parseInt(N(0xf9))/0xa*(-parseInt(N(0xbf))/0xb);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a0a,0x5144d));import{connect}from'cloudflare:sockets';const a0c='vl',a0d=a0O(0xad),a0e=a0O(0xdf);let a0f='123456',a0g=a0O(0x10a),a0h=![],a0i='',a0j=![],a0k=a0O(0x10f),a0l=[a0O(0xc5)],a0m=[''],a0n='إصدار_SOCKS5',a0o=!![],a0p=!![],a0q='',a0r='',a0s=[],a0t=0x0;const a0u=0x5*0x3c*0x3e8,a0v=0x1388,a0w=['https://dns.google/dns-query',a0O(0xf3),'https://1.1.1.1/dns-query',a0O(0x125)],a0x=a0O(0xed);async function a0y(){const P=a0O;try{const a=await fetch(a0x,{'cf':{'cacheEverything':!![]}});return new Response(a[P(0x12b)],a);}catch{return new Response('<!DOCTYPE\x20html>\x0a\x20\x20\x20\x20\x20\x20\x20<html>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20<head><title>أهلاً\x20وسهلاً</title></head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20<body><h1>تم\x20نشر\x20عامل\x20Cloudflare\x20بنجاح</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>هذه\x20صفحة\x20تمويه\x20ثابتة\x20(فشل\x20التحميل\x20من\x20مصدر\x20بعيد).</p></body>\x0a\x20\x20\x20\x20\x20\x20\x20</html>',{'status':0xc8,'headers':{'Content-Type':P(0x121)}});}}const a0z=(a,b,c)=>{const Q=a0O,d=import.meta?.[Q(0xff)]?.[a]??c?.[a];if(d===undefined||d===null||d==='')return b;if(typeof d===Q(0xfd)){const e=d[Q(0xd2)]();if(e===Q(0x120))return!![];if(e===Q(0xe3))return![];if(e[Q(0xab)]('\x0a'))return e['split']('\x0a')[Q(0xae)](f=>f[Q(0xd2)]())[Q(0xce)](Boolean);if(!isNaN(e)&&e!=='')return Number(e);return e;}return d;};function a0b(a,b){const c=a0a();return a0b=function(d,e){d=d-0xa0;let f=c[d];return f;},a0b(a,b);}async function a0A(){const R=a0O;if(!a0r){console[R(0xf1)](R(0xfc));return;}const a=Date[R(0xb2)]();if(a-a0t<a0u&&a0s[R(0xe2)]>0x0)return;console[R(0xf1)]('جاري\x20تحميل\x20قائمة\x20عناوين\x20SOCKS5...');try{const b=await fetch(a0r);if(!b['ok'])throw new Error(R(0xe8)+b[R(0xc7)]+R(0xba)+b['status']+')');const c=await b[R(0xee)](),d=c[R(0x101)]('\x0a')['map'](f=>f['trim']())[R(0xce)](f=>f&&!f[R(0xb7)]('#'));d['length']>0x0?(a0s=d,a0t=a,console[R(0xf1)]('تم\x20تحميل\x20'+a0s[R(0xe2)]+R(0xa8))):console[R(0x119)]('ملف\x20قائمة\x20عناوين\x20SOCKS5\x20فارغ\x20أو\x20لا\x20يحتوي\x20على\x20عناوين\x20صالحة.\x20سيتم\x20الاحتفاظ\x20بالقائمة\x20الناجحة\x20السابقة\x20إذا\x20كانت\x20موجودة.');}catch(f){console[R(0x103)](R(0xe8)+f[R(0xd7)]+R(0x10c));}}export default{async 'fetch'(a,b){const S=a0O;a0f=a0z('ID',a0f,b),a0g=a0z(S(0x115),a0g,b),a0l=a0z('IP',a0l,b),a0m=a0z(S(0x11e),a0m,b),a0i=a0z('私钥',a0i,b),a0j=a0z('隐藏',a0j,b),a0h=a0z(S(0xf0),a0h,b),a0k=a0z('嘲讽语',a0k,b),a0n=a0z('我的节点名字',a0n,b),a0o=a0z(S(0xb0),a0o,b),a0p=a0z('SOCKS5_GLOBAL',a0p,b),a0q=a0z(S(0xfa),a0q,b),a0r=a0z(S(0xda),a0r,b),await a0A();const c=a[S(0x122)]['get'](S(0xaa)),d=new URL(a[S(0x124)]);if(!c||c!==S(0xc6)){if(a0m){const f=Array['isArray'](a0m)?a0m:[a0m],g=[];for(const h of f){try{const i=await fetch(h),j=await i[S(0xee)](),l=j['split']('\x0a')['map'](m=>m[S(0xd2)]())['filter'](m=>m);g[S(0xc4)](...l);}catch(m){console['warn'](S(0xa0)+h,m);}}if(g[S(0xe2)]>0x0)a0l=g;}switch(d[S(0xd4)]){case'/':return a0y();case'/'+a0f:{const n=a0L(a0f,a['headers'][S(0xdc)](S(0x129)));return new Response(n,{'status':0xc8,'headers':{'Content-Type':S(0xf4)}});}case'/'+a0f+'/'+a0c+a0d:{if(a0j)return new Response(a0k,{'status':0xc8,'headers':{'Content-Type':'text/plain;charset=utf-8'}});else{const o=a0M(a['headers'][S(0xdc)](S(0x129)));return new Response(o,{'status':0xc8,'headers':{'Content-Type':S(0xf4)}});}}default:return new Response(S(0x12a),{'status':0xc8});}}else{if(a0h){const r=a[S(0x122)][S(0xdc)]('my-key');if(r!==a0i)return new Response(S(0x10d),{'status':0x193});}const p=a[S(0x122)][S(0xdc)](S(0x12c)),q=a0C(p);if(!a0h&&a0H(new Uint8Array(q['slice'](0x1,0x11)))!==a0g)return new Response('UUID\x20غير\x20صالح',{'status':0x193});try{const {tcpSocket:s,initialData:t}=await a0D(q);return await a0B(a,s,t);}catch(u){return console[S(0x103)](S(0xaf),u),new Response(S(0xcb)+u[S(0xd7)],{'status':0x1f6});}}}};async function a0B(a,b,c){const T=a0O,{0x0:d,0x1:e}=new WebSocketPair();return e[T(0xca)](),a0G(e,b,c),new Response(null,{'status':0x65,'webSocket':d});}function a0C(a){const U=a0O;return a=a[U(0xa4)](/-/g,'+')[U(0xa4)](/_/g,'/'),Uint8Array['from'](atob(a),b=>b[U(0x112)](0x0))[U(0xe5)];}async function a0D(a){const V=a0O,d=new DataView(a),f=new Uint8Array(a),g=f[0x11],h=0x12+g+0x1,j=d['getUint16'](h);if(j===0x35)throw new Error(V(0xe6));const k=h+0x2;let l=f[k],m=k+0x1,n,o;switch(l){case 0x1:o=0x4,n=Array[V(0x127)](f[V(0xdd)](m,m+o))['join']('.');break;case 0x2:o=f[m],m+=0x1;const r=new TextDecoder()[V(0x11b)](f['slice'](m,m+o));n=await a0I(r);n!==r&&(l=n[V(0xab)](':')?0x3:0x1);break;case 0x3:o=0x10;const s=[],t=new DataView(a,m,0x10);for(let u=0x0;u<0x8;u++)s[V(0xc4)](t[V(0x123)](u*0x2)[V(0xd8)](0x10));n=s[V(0xbb)](':');break;default:throw new Error('نوع\x20عنوان\x20الهدف\x20غير\x20صالح');}const p=a[V(0xdd)](m+o);let q;if(a0o){if(a0p)q=await a0E(l,n,j);else try{q=connect({'hostname':n,'port':j}),await q[V(0x126)];}catch(v){console[V(0x119)]('فشل\x20الاتصال\x20المباشر\x20بـ\x20'+n+':'+j+V(0x102)+v[V(0xd7)]),q=await a0E(l,n,j);}}else q=connect({'hostname':n,'port':j});return await q[V(0x126)],{'tcpSocket':q,'initialData':p};}async function a0E(a,b,c){const W=a0O;let d=[];a0s['length']>0x0&&(d=[...a0s]);d[W(0xe2)]===0x0&&a0q&&d['push'](a0q);if(d[W(0xe2)]===0x0)throw new Error(W(0xec));const e=d[W(0xae)](async(f,g)=>{const X=W;let h=null;try{const {username:i,password:j,host:k,port:l}=a0J(f);console[X(0xf1)](X(0xb3)+(i?'مع\x20المصادقة':'بدون\x20مصادقة')+'\x20'+k+':'+l+'\x20(وكيل\x20'+(g+0x1)+'/'+d[X(0xe2)]+')');const m=new Promise((n,o)=>{const p=setTimeout(()=>{const Y=a0b;o(new Error(Y(0xcd)+k+':'+l));},a0v);});return h=await Promise[X(0xf8)]([a0F(i,j,k,l,a,b,c),m]),console['log'](X(0xe9)+k+':'+l),{'socket':h,'config':f};}catch(n){console[X(0x119)]('فشل\x20اتصال\x20وكيل\x20SOCKS5\x20أو\x20انتهت\x20مهلته\x20('+f+X(0x106)+n['message']);if(h)try{h['close']();}catch(o){console[X(0x119)](X(0xb9),o);}return Promise[X(0xb6)](new Error(X(0x111)+f+'\x20-\x20'+n[X(0xd7)]));}});try{const {socket:f}=await Promise['any'](e);return f;}catch(g){console[W(0x103)]('فشلت\x20جميع\x20محاولات\x20وكيل\x20SOCKS5:',g[W(0xa3)][W(0xae)](h=>h[W(0xd7)])[W(0xbb)](';\x20'));throw new Error('فشلت\x20جميع\x20محاولات\x20وكيل\x20SOCKS5.');}}async function a0F(a,b,c,d,f,g,h){const Z=a0O,k=connect({'hostname':c,'port':d});let l,m;try{await k['opened'],l=k[Z(0xef)]['getWriter'](),m=k['readable'][Z(0xe1)]();const n=new TextEncoder(),o=new Uint8Array([0x5,0x2,0x0,0x2]);await l[Z(0x100)](o);const p=(await m[Z(0xac)]())[Z(0xa7)];if(!p||p[Z(0xe2)]<0x2)throw new Error('استجابة\x20تفاوض\x20المصادقة\x20SOCKS5\x20غير\x20صالحة.');if(p[0x1]===0x2){if(!a||!b)throw new Error(Z(0xc3));const t=new Uint8Array([0x1,a[Z(0xe2)],...n[Z(0x117)](a),b[Z(0xe2)],...n[Z(0x117)](b)]);await l[Z(0x100)](t);const u=(await m[Z(0xac)]())[Z(0xa7)];if(!u||u[Z(0xe2)]<0x2||u[0x0]!==0x1||u[0x1]!==0x0)throw new Error('خطأ\x20في\x20اسم\x20المستخدم/كلمة\x20المرور\x20SOCKS5\x20أو\x20فشل\x20المصادقة.');}else{if(p[0x1]===0x0){}else throw new Error(Z(0xc1)+p[0x1]);}let q;switch(f){case 0x1:q=new Uint8Array([0x1,...g[Z(0x101)]('.')[Z(0xae)](Number)]);break;case 0x2:q=new Uint8Array([0x3,g['length'],...n['encode'](g)]);break;case 0x3:const v=g[Z(0x101)](':'),w=[];let x=![];for(let y=0x0;y<v[Z(0xe2)];y++){let z=v[y];if(z===''){if(!x){let A=0x8-(v[Z(0xe2)]-0x1);if(v[0x0]===''&&y===0x0)A++;if(v[v[Z(0xe2)]-0x1]===''&&y===v[Z(0xe2)]-0x1)A++;for(let B=0x0;B<A;B++){w[Z(0xc4)](0x0,0x0);}x=!![];}}else{let C=parseInt(z,0x10);w[Z(0xc4)](C>>0x8&0xff,C&0xff);}}while(w[Z(0xe2)]<0x10){w[Z(0xc4)](0x0,0x0);}q=new Uint8Array([0x4,...w]);break;default:throw new Error(Z(0xf6));}const r=new Uint8Array([0x5,0x1,0x0,...q,h>>0x8,h&0xff]);await l[Z(0x100)](r);const s=(await m[Z(0xac)]())[Z(0xa7)];if(!s||s[Z(0xe2)]<0x2||s[0x0]!==0x5||s[0x1]!==0x0)throw new Error(Z(0x109)+g+':'+h+Z(0x108)+(s?s[0x1]:Z(0xa6)));return l[Z(0x11d)](),m['releaseLock'](),k;}catch(D){if(l)l[Z(0x11d)]();if(m)m['releaseLock']();if(k)k[Z(0xbc)]();throw D;}}async function a0G(a,b,c){const a0=a0O;a[a0(0xd3)](new Uint8Array([0x0,0x0]));const d=b[a0(0xef)][a0(0xd1)](),f=b[a0(0xf7)][a0(0xe1)]();c&&c[a0(0x114)]>0x0&&await d[a0(0x100)](c)[a0(0xa5)](g=>console[a0(0x103)](a0(0xb5),g));a['addEventListener'](a0(0xd7),async g=>{const a1=a0;if(g[a1(0xe0)]instanceof ArrayBuffer)try{await d[a1(0x100)](g['data']);}catch(h){console['error']('فشل\x20الكتابة\x20من\x20WebSocket\x20إلى\x20TCP:',h);}else console[a1(0x119)](a1(0xa1),g['data']);});try{while(!![]){const {value:g,done:h}=await f[a0(0xac)]();if(h)break;if(g)try{a[a0(0xd3)](g);}catch(i){console[a0(0x103)](a0(0x107),i);break;}}}catch(j){console[a0(0x103)](a0(0x113),j);}finally{try{a[a0(0xbc)]();}catch(k){console[a0(0x119)](a0(0xc2),k);}try{f['cancel']();}catch(l){console['warn'](a0(0xb8),l);}try{d[a0(0x11d)]();}catch(m){console[a0(0x119)](a0(0x11a),m);}try{b[a0(0xbc)]();}catch(n){console[a0(0x119)](a0(0x11f),n);}console['log'](a0(0xea));}}function a0a(){const aa=['انتهت\x20مهلة\x20الاتصال:\x20','filter','toLowerCase','?encryption=none&','getWriter','trim','send','pathname','130310qMHpLI','security=tls','message','toString','1098dIycko','SOCKS5_TXT_URL','padStart','get','slice','فشل\x20طلب\x20DOH\x20لـ\x20','://','data','getReader','length','false','2298136igjwWJ','buffer','تم\x20رفض\x20اتصالات\x20DNS','Answer','فشل\x20تحميل\x20قائمة\x20عناوين\x20SOCKS5:\x20','تم\x20الاتصال\x20بوكيل\x20SOCKS5\x20بنجاح:\x20','تم\x20إغلاق\x20خط\x20النقل.','json','لم\x20يتم\x20تهيئة\x20أي\x20عنوان\x20وكيل\x20SOCKS5\x20(رابط_قائمة_الوكلاء\x20أو\x20عنوان_الوكيل).','https://cf-worker-dir-bke.pages.dev/','text','writable','私钥开关','log','then','https://cloudflare-dns.com/dns-query','text/plain;charset=utf-8','1643248HLgvnH','نوع\x20عنوان\x20هدف\x20SOCKS5\x20غير\x20صالح','readable','race','220lYzBxC','SOCKS5_ADDRESS','find','رابط_قائمة_الوكلاء\x20غير\x20مهيأ،\x20سيتم\x20تخطي\x20تحميل\x20قائمة\x20SOCKS5.','string','471574XosBLd','env','write','split','،\x20سيتم\x20محاولة\x20وكيل\x20SOCKS5:\x20','error','type',':443#عقدة_احتياطية','):\x20','فشل\x20إرسال\x20البيانات\x20من\x20TCP\x20إلى\x20WebSocket:',',\x20رمز\x20استجابة\x20SOCKS5:\x20','فشل\x20اتصال\x20هدف\x20SOCKS5.\x20الهدف:\x20','25dce6e6-1c37-4e8c-806b-5ef8affd9f55','452967ECtWHS','.\x20سيتم\x20استخدام\x20الاحتياطي\x20(إذا\x20كان\x20مهيأ)\x20أو\x20القائمة\x20الناجحة\x20الأخيرة.','فشل\x20التحقق\x20من\x20المفتاح\x20السري','application/dns-json','أوه،\x20لقد\x20وجدتني،\x20لكني\x20لن\x20أريك\x20أي\x20شيء،\x20ألا\x20يزعجك\x20هذا،\x20هاهاها','&sni=','فشل\x20الوكيل:\x20','charCodeAt','فشل\x20قراءة\x20البيانات\x20من\x20TCP:','byteLength','UUID','pop','encode','لا\x20يوجد\x20سجل\x20','warn','فشل\x20تحرير\x20قفل\x20كاتب\x20TCP:','decode','notls','releaseLock','TXT','فشل\x20إغلاق\x20اتصال\x20TCP:','true','text/html;\x20charset=utf-8','headers','getUint16','url','https://dns.quad9.net/dns-query','opened','from','27ChgnGI','Host','أهلاً\x20بالعالم!','body','sec-websocket-protocol','فشل\x20جلب\x20أو\x20تحليل\x20عناوين\x20IP\x20المفضلة\x20من\x20الرابط:\x20','تم\x20استقبال\x20بيانات\x20ليست\x20ArrayBuffer\x20(WebSocket):','&type=ws&host=','errors','replace','catch','لا\x20يوجد\x20استجابة','value','\x20عنوان\x20SOCKS5\x20بنجاح.','تنسيق\x20عنوان\x20IPv6\x20غير\x20صالح','Upgrade','includes','read','ess','map','فشل\x20تحليل\x20بروتوكول\x20VL\x20أو\x20اتصال\x20TCP:','SOCKS5_ENABLE','الرجاء\x20إيقاف\x20تشغيل\x20وظيفة\x20المفتاح\x20السري\x20أولاً','now','محاولة\x20الاتصال\x20بوكيل\x20SOCKS5\x20بالتوازي:\x20','&type=','فشل\x20كتابة\x20البيانات\x20الأولية\x20إلى\x20TCP:','reject','startsWith','فشل\x20إلغاء\x20قارئ\x20TCP:','خطأ\x20في\x20إغلاق\x20الاتصال\x20الفاشل:','\x20(الحالة:\x20','join','close','\x0a1.وظيفة\x20المفتاح\x20السري\x20لهذا\x20العامل\x20تدعم\x20فقط\x20الاشتراكات\x20العامة،\x20يرجى\x20إيقاف\x20تشغيل\x20وظيفة\x20المفتاح\x20السري\x20للآخرين.\x0a2.للمتطلبات\x20الأخرى،\x20يرجى\x20البحث\x20بنفسك.\x0aاشتراك\x20عام:\x20https','5OuhiJj','237556yVjPaS','&path=%2F%3Ded%3D2560#','طريقة\x20مصادقة\x20SOCKS5\x20غير\x20مدعومة:\x20','فشل\x20إغلاق\x20WebSocket:','وكيل\x20SOCKS5\x20يتطلب\x20المصادقة،\x20ولكن\x20لم\x20يتم\x20تهيئة\x20أي\x20بيانات\x20اعتماد.','push','cloudflare-ddns.zone.id:443#الولايات\x20المتحدة\x20الأمريكية\x20-\x20العقدة\x20الافتراضية\x20لـ\x20CDN\x20Cloudflare','websocket','statusText','\x20فشل\x20طلب\x20','19271pRiYbB','accept','بوابة\x20سيئة:\x20','lastIndexOf'];a0a=function(){return aa;};return a0a();}function a0H(b){const a2=a0O,c=Array['from'](b,d=>d[a2(0xd8)](0x10)[a2(0xdb)](0x2,'0'))[a2(0xbb)]('');return c[a2(0xdd)](0x0,0x8)+'-'+c[a2(0xdd)](0x8,0xc)+'-'+c[a2(0xdd)](0xc,0x10)+'-'+c['slice'](0x10,0x14)+'-'+c[a2(0xdd)](0x14);}async function a0I(a){const a3=a0O,b=c=>a0w['map'](d=>fetch(d+'?name='+a+a3(0xb4)+c,{'headers':{'Accept':a3(0x10e)}})[a3(0xf2)](f=>f[a3(0xeb)]())[a3(0xf2)](f=>{const a4=a3,g=f[a4(0xe7)]?.[a4(0xfb)](h=>h[a4(0x104)]===(c==='A'?0x1:0x1c))?.[a4(0xe0)];if(g)return g;return Promise[a4(0xb6)](a4(0x118)+c);})[a3(0xa5)](f=>Promise[a3(0xb6)](d+a3(0xc8)+c+':\x20'+f)));try{return await Promise['any'](b('A'));}catch(c){try{return await Promise['any'](b('AAAA'));}catch(d){return console['warn'](a3(0xde)+a+'\x20(كلا\x20من\x20IPv4\x20و\x20IPv6):\x20'+d[a3(0xd7)]),a;}}}function a0J(a){const a5=a0O,b=a[a5(0xcc)]('@');if(b===-0x1){const [j,k]=a0K(a);return{'username':'','password':'','host':j,'port':k};}const c=a[a5(0xdd)](0x0,b),d=a[a5(0xdd)](b+0x1),e=c[a5(0xcc)](':'),f=e>-0x1?c[a5(0xdd)](0x0,e):'',g=e>-0x1?c[a5(0xdd)](e+0x1):'',[h,i]=a0K(d);return{'username':f,'password':g,'host':h,'port':i};}function a0K(a){const a6=a0O;let b,c;if(a['startsWith']('[')){const d=a['indexOf'](']');if(d===-0x1)throw new Error(a6(0xa9));b=a['slice'](0x1,d);const e=a[a6(0xdd)](d+0x1);c=e[a6(0xb7)](':')?Number(e[a6(0xdd)](0x1)):0x1bb;if(isNaN(c)||c<=0x0||c>0xffff)c=0x1bb;}else{const f=a[a6(0xcc)](':');f>-0x1&&!isNaN(Number(a[a6(0xdd)](f+0x1)))?(b=a[a6(0xdd)](0x0,f),c=Number(a[a6(0xdd)](f+0x1))):(b=a,c=0x1bb);}return[b,c];}function a0L(a,b){const a7=a0O;return a7(0xbd)+a0e+b+'/'+a+'/'+a0c+a0d+'\x0a';}function a0M(a){const a8=a0O,b=a0l[a8(0xe2)]===0x0||a0l[a8(0xe2)]===0x1&&a0l[0x0]==='',c=a0m['length']===0x0||a0m[a8(0xe2)]===0x1&&a0m[0x0]==='',d=!b||!c?a0l:[a+a8(0x105)];return a0h?a8(0xb1):d[a8(0xae)](e=>{const a9=a8,f=e['split']('@');let g=f[0x0],h=a9(0xd6);if(f[a9(0xe2)]>0x1){const n=f[0x1];n[a9(0xcf)]()===a9(0x11c)&&(h='security=none');}const [i,j=a0n]=g[a9(0x101)]('#'),k=i['split'](':'),l=k['length']>0x1&&!isNaN(Number(k[k[a9(0xe2)]-0x1]))?Number(k[a9(0x116)]()):0x1bb,m=k['join'](':');return''+a0c+a0d+a0e+a0g+'@'+m+':'+l+a9(0xd0)+h+a9(0x110)+a+a9(0xa2)+a+a9(0xc0)+j;})[a8(0xbb)]('\x0a');}