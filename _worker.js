function a0a(){const ac=['mode','catch','content-length','pathname','sec-websocket-protocol','message','join','includes','no-store,\x20no-cache,\x20must-revalidate,\x20max-age=0','3770140fepudK','searchParams','POST','<base\x20href=\x22','method','getReader','url','headers','262cGDAvb','3789wCwcSm','writable','www.visa.com.hk:443','content-type','read','length','japan.com:443','readable','text/html;\x20charset=utf-8','host','icook.hk:443','66012oDaSiw','text/plain;\x20charset=utf-8','readyState','value','data','%3F','GET','write','substring','decode','12522JWDUXu','addEventListener','://','auto','User-Agent','releaseLock','close','bestcf.030101.xyz:443','substr','36lpZDAO','set','toLowerCase','<h1>伪装页面加载失败</h1>','from','/?ed=2560','text/html','getUint16','29416aENRdt','user','byteLength','push','charCodeAt','937169DLDybk','https://cf-worker-dir-bke.pages.dev/','none','split','7tLSPoI','test','text','forEach','send','1f9d104e-ca0e-4202-ba4b-a0afb969c748','buffer','application/dns-message','encode','hostname','878435CxIrEj','get','187GOyNAa','enqueue','direct','Cache-Control','status','snippet_','delete','wok.woxxxxxx.nyc.mn:443','arrayBuffer','dmxlc3M=','pipeTo','chrome','www.visa.com.sg:443','https://1.1.1.1/dns-query','tls','opened','slice','getWriter','proxy','proxyip','getUint8','port','error','replace','303486PLTDLg','pass'];a0a=function(){return ac;};return a0a();}const a0V=a0b;(function(a,b){const U=a0b,c=a();while(!![]){try{const d=parseInt(U(0x146))/0x1+parseInt(U(0x11a))/0x2*(parseInt(U(0x130))/0x3)+parseInt(U(0x139))/0x4*(-parseInt(U(0x154))/0x5)+parseInt(U(0x16e))/0x6*(-parseInt(U(0x14a))/0x7)+parseInt(U(0x141))/0x8*(parseInt(U(0x11b))/0x9)+-parseInt(U(0x112))/0xa+-parseInt(U(0x156))/0xb*(parseInt(U(0x126))/0xc);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a0a,0xe2f95));import{connect}from'cloudflare:sockets';function a0b(a,b){a=a-0x10e;const c=a0a();let d=c[a];return d;}const a0c=a0V(0x14f),a0d=a0V(0x15d),a0e=[a0V(0x137),a0V(0x121),a0V(0x162),a0V(0x11d),a0V(0x125),'icook.tw:443'],a0f=a0V(0x147);export default{async 'fetch'(a){const W=a0V,b=new URL(a[W(0x118)]);if(a[W(0x119)][W(0x155)]('Upgrade')?.[W(0x13b)]()==='websocket')return await a0j(a);else{if(a[W(0x116)]===W(0x12c)){if(b['pathname']==='/')return await a0g(a);else{if(b[W(0x173)][W(0x13b)]()[W(0x110)]('/'+a0c))return await a0h(a);}}}return new Response(W(0x16c),{'status':0x194});}};async function a0g(a){const X=a0V;try{const b=await fetch(a0f,{'headers':{'User-Agent':a[X(0x119)]['get'](X(0x134))||'cf-worker-masquerade'}}),c=b[X(0x119)][X(0x155)](X(0x11e))||'';if(c['includes'](X(0x13f))){let d=await b[X(0x14c)]();const e=X(0x115)+a0f+'\x22>';/<head[^>]*>/i[X(0x14b)](d)?d=d[X(0x16d)](/<head[^>]*>/i,g=>g+'\x0a'+e+'\x0a'):d=e+'\x0a'+d;const f=new Headers(b['headers']);return f[X(0x13a)](X(0x11e),X(0x123)),f[X(0x15c)](X(0x172)),f['set'](X(0x159),X(0x111)),new Response(d,{'status':b[X(0x15a)],'headers':f});}else{const g=new Headers(b['headers']);return g[X(0x13a)](X(0x159),X(0x111)),new Response(await b[X(0x15e)](),{'status':b[X(0x15a)],'headers':g});}}catch(h){return new Response(X(0x13c),{'status':0x1f6,'headers':{'Content-Type':X(0x123)}});}}async function a0h(a){const Y=a0V,b=new URL(a[Y(0x118)]),c=b[Y(0x153)];let d=a0i(c),e=btoa(d['join']('\x0a'));return new Response(e,{'headers':{'Content-Type':Y(0x127),'Cache-Control':'no-store,\x20no-cache,\x20must-revalidate,\x20max-age=0'}});}function a0i(a){const Z=a0V;let b=[],c=0x0;const d=Z(0x13e),e=atob(Z(0x15f));return a0e[Z(0x14d)](f=>{const a0=Z;c+=0x1;let g=a0(0x15b)+c;const h=new URLSearchParams({'encryption':a0(0x148),'security':a0(0x164),'sni':a,'fp':a0(0x161),'type':'ws','host':a,'path':d});b[a0(0x144)](e+a0(0x132)+a0c+'@'+f+'?'+h['toString']()+'#'+encodeURIComponent(g));}),b;}async function a0j(a){const a1=a0V,[b,c]=Object['values'](new WebSocketPair());c['accept']();const d=new URL(a[a1(0x118)]);if(d[a1(0x173)][a1(0x110)](a1(0x12b))){const p=decodeURIComponent(d[a1(0x173)]),q=p['indexOf']('?');q!==-0x1&&(d['search']=p[a1(0x12e)](q),d[a1(0x173)]=p['substring'](0x0,q));}const e=d[a1(0x113)][a1(0x155)](a1(0x170))||'proxy',f=d[a1(0x113)][a1(0x155)]('s5'),g=d[a1(0x113)][a1(0x155)](a1(0x169)),h=f?f:d[a1(0x173)]['slice'](0x1),i=h[a1(0x110)]('@')?((()=>{const a2=a1,[r,s]=h['split']('@'),[t,v]=r[a2(0x149)](':'),[w,x=0x1bb]=s[a2(0x149)](':');return{'user':t,'pass':v,'host':w,'port':+x};})()):null,j=g?String(g):a0d,k=()=>{const a3=a1;if(e===a3(0x168))return['direct','proxy'];if(e!==a3(0x133))return[e];const r=[],s=d['search'][a3(0x166)](0x1);for(const t of s[a3(0x149)]('&')){const v=t[a3(0x149)]('=')[0x0];if(v===a3(0x158))r[a3(0x144)]('direct');else{if(v==='s5')r['push']('s5');else{if(v===a3(0x169))r[a3(0x144)]('proxy');}}}return r[a3(0x120)]?r:[a3(0x158)];};let l=null,m=null,n=![];const o=async(s,t)=>{const a4=a1,v=connect({'hostname':i[a4(0x124)],'port':i[a4(0x16b)]});await v['opened'];const x=v['writable'][a4(0x167)](),y=v['readable'][a4(0x117)]();await x[a4(0x12d)](new Uint8Array([0x5,0x2,0x0,0x2]));const z=(await y[a4(0x11f)]())[a4(0x129)];if(z[0x1]===0x2&&i[a4(0x142)]){const B=new TextEncoder()[a4(0x152)](i[a4(0x142)]),C=new TextEncoder()[a4(0x152)](i[a4(0x16f)]);await x[a4(0x12d)](new Uint8Array([0x1,B[a4(0x120)],...B,C[a4(0x120)],...C])),await y[a4(0x11f)]();}const A=new TextEncoder()[a4(0x152)](s);return await x[a4(0x12d)](new Uint8Array([0x5,0x1,0x0,0x3,A['length'],...A,t>>0x8,t&0xff])),await y[a4(0x11f)](),x['releaseLock'](),y[a4(0x135)](),v;};return new ReadableStream({'start'(r){const a5=a1;c['addEventListener'](a5(0x10e),t=>r[a5(0x157)](t[a5(0x12a)])),c['addEventListener']('close',()=>{const a6=a5;l?.[a6(0x136)](),r[a6(0x136)]();}),c[a5(0x131)](a5(0x16c),()=>{const a7=a5;l?.[a7(0x136)](),r[a7(0x16c)]();});const s=a[a5(0x119)][a5(0x155)](a5(0x174));if(s)try{r[a5(0x157)](Uint8Array[a5(0x13d)](atob(s[a5(0x16d)](/-/g,'+')[a5(0x16d)](/_/g,'/')),t=>t[a5(0x145)](0x0))[a5(0x150)]);}catch{}}})[a1(0x160)](new WritableStream({async 'write'(r){const a8=a1;if(n)return m?.[a8(0x12d)](r);if(l){const I=l[a8(0x11c)][a8(0x167)]();await I['write'](r),I[a8(0x135)]();return;}if(r[a8(0x143)]<0x18)return;const s=new Uint8Array(r[a8(0x166)](0x1,0x11)),t=a0c[a8(0x16d)](/-/g,'');for(let J=0x0;J<0x10;J++){if(s[J]!==parseInt(t[a8(0x138)](J*0x2,0x2),0x10))return;}const v=new DataView(r),x=v['getUint8'](0x11),y=v[a8(0x16a)](0x12+x);if(y!==0x1&&y!==0x2)return;let z=0x13+x;const A=v['getUint16'](z),B=v[a8(0x16a)](z+0x2);z+=0x3;let C='';if(B===0x1)C=v[a8(0x16a)](z)+'.'+v[a8(0x16a)](z+0x1)+'.'+v[a8(0x16a)](z+0x2)+'.'+v['getUint8'](z+0x3),z+=0x4;else{if(B===0x2){const K=v[a8(0x16a)](z++);C=new TextDecoder()[a8(0x12f)](r[a8(0x166)](z,z+K)),z+=K;}else{if(B===0x3){const L=[];for(let M=0x0;M<0x8;M++,z+=0x2)L['push'](v[a8(0x140)](z)['toString'](0x10));C=L[a8(0x10f)](':');}else return;}}const D=new Uint8Array([r[0x0],0x0]),E=r[a8(0x166)](z);if(y===0x2){if(A!==0x35)return;n=!![];let N=![];const {readable:O,writable:P}=new TransformStream({'transform'(Q,R){const a9=a8;for(let S=0x0;S<Q[a9(0x143)];){const T=new DataView(Q[a9(0x166)](S,S+0x2))[a9(0x140)](0x0);R[a9(0x157)](Q[a9(0x166)](S+0x2,S+0x2+T)),S+=0x2+T;}}});return O['pipeTo'](new WritableStream({async 'write'(Q){const aa=a8;try{const R=await fetch(aa(0x163),{'method':aa(0x114),'headers':{'content-type':aa(0x151)},'body':Q});if(c[aa(0x128)]===0x1){const S=new Uint8Array(await R[aa(0x15e)]());c[aa(0x14e)](new Uint8Array([...N?[]:D,S['length']>>0x8,S[aa(0x120)]&0xff,...S])),N=!![];}}catch{}}})),m=P['getWriter'](),m[a8(0x12d)](E);}let F=null;for(const Q of k()){try{if(Q===a8(0x158)){F=connect({'hostname':C,'port':A}),await F[a8(0x165)];break;}else{if(Q==='s5'&&i){F=await o(C,A);break;}else{if(Q===a8(0x168)&&j){const [R,S=A]=j[a8(0x149)](':');F=connect({'hostname':R,'port':+S||A}),await F[a8(0x165)];break;}}}}catch{}}if(!F)return;l=F;const G=F[a8(0x11c)][a8(0x167)]();await G[a8(0x12d)](E),G[a8(0x135)]();let H=![];F[a8(0x122)][a8(0x160)](new WritableStream({'write'(T){const ab=a8;c[ab(0x128)]===0x1&&(c[ab(0x14e)](H?T:new Uint8Array([...D,...new Uint8Array(T)])),H=!![]);},'close':()=>c[a8(0x128)]===0x1&&c[a8(0x136)](),'abort':()=>c['readyState']===0x1&&c[a8(0x136)]()}))[a8(0x171)](()=>{});}}))[a1(0x171)](()=>{}),new Response(null,{'status':0x65,'webSocket':b});}