const a0F=a0b;(function(a,b){const E=a0b,c=a();while(!![]){try{const d=parseInt(E(0x169))/0x1*(-parseInt(E(0x153))/0x2)+parseInt(E(0x13b))/0x3+parseInt(E(0x1a2))/0x4*(parseInt(E(0x19c))/0x5)+-parseInt(E(0x1af))/0x6+-parseInt(E(0x175))/0x7*(-parseInt(E(0x192))/0x8)+parseInt(E(0x136))/0x9+-parseInt(E(0x1bc))/0xa*(parseInt(E(0x16a))/0xb);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a0a,0x571fe));let a0c='vl',a0d=a0F(0x144),a0e='://';function a0b(a,b){const c=a0a();return a0b=function(d,e){d=d-0x133;let f=c[d];return f;},a0b(a,b);}import{connect}from'cloudflare:sockets';let a0f=a0F(0x1a5),a0g=a0F(0x14c),a0h=0x1bb,a0i=![],a0j='https://cf-worker-dir-bke.pages.dev';async function a0k(){const G=a0F;try{const a=await fetch(a0j,{'cf':{'cacheEverything':!![]}});return new Response(a['body'],a);}catch{return new Response(G(0x139),{'status':0xc8,'headers':{'Content-Type':G(0x193)}});}}if(!a0r(a0f))throw new Error('「パスポート」が無効だぜ！作り直せ！');export default{async 'fetch'(a,b,c){const H=a0F;try{a0f=b[H(0x190)]||a0f;if(b[H(0x1b1)]){const h=b[H(0x1b1)][H(0x19b)](':');a0g=h[0x0],a0h=h[H(0x145)]>0x1?parseInt(h[0x1],0xa):0x1bb;}let d=![],f=H(0x191);if(b['HIDE_SUBSCRIPTION']!==undefined)d=b[H(0x15b)]===H(0x18b);else b['隠す']!==undefined&&(d=b['隠す']===H(0x18b));if(b['SARCASM_MESSAGE']!==undefined)f=b['SARCASM_MESSAGE'];else b['皮肉なメッセージ']!==undefined&&(f=b[H(0x19e)]);b[H(0x17b)]!==undefined&&(a0i=b['NAT64']==='true');console['log'](H(0x188)+b['HIDE_SUBSCRIPTION']),console[H(0x185)](H(0x180)+b['隠す']),console[H(0x185)](H(0x15c)+d),console[H(0x185)](H(0x195)+b[H(0x18f)]),console['log'](H(0x164)+b[H(0x19e)]),console[H(0x185)]('最終的に決まった嘲諷語:\x20'+f),console[H(0x185)]('環境変数\x20NAT64\x20の値:\x20'+b['NAT64']),console[H(0x185)](H(0x19f)+a0i),console[H(0x185)](H(0x18c)+b['PROXYIP']),console[H(0x185)](H(0x19a)+a0g),console[H(0x185)](H(0x160)+a0h);const g=a[H(0x15f)][H(0x18a)](H(0x16d));if(!g||g!==H(0x16e)){const j=new URL(a['url']);switch(j[H(0x19d)]){case'/':return a0k();case'/'+a0f:{if(d)return new Response(f,{'status':0xc8,'headers':{'Content-Type':H(0x14d)}});else{const k=a0z(a0f,a[H(0x15f)][H(0x18a)](H(0x15d)));return new Response(''+k,{'status':0xc8,'headers':{'Content-Type':H(0x14d)}});}}default:return new Response(H(0x1ae),{'status':0x194});}}else return await a0l(a,a0g,a0h);}catch(l){let m=l;return new Response(H(0x13a)+m[H(0x173)]());}}};async function a0l(a,b,c){const I=a0F,d=new WebSocketPair(),[e,f]=Object[I(0x168)](d);f[I(0x183)]();let g='',h='';const j=(o,p)=>{const J=I;console[J(0x185)]('['+g+':'+h+']\x20'+o,p||'');},k=a[I(0x15f)]['get']('sec-websocket-protocol')||'',l=a0n(f,k,j);let m={'value':null},n=![];return l[I(0x167)](new WritableStream({async 'write'(o,p){const K=I;if(n)return await a0y(o,f,null,j);if(m[K(0x178)]){const x=m[K(0x178)]['writable'][K(0x154)]();await x[K(0x142)](o),x[K(0x1b6)]();return;}const {hasError:q,message:r,addressType:s,portRemote:portRemote=0x1bb,addressRemote:addressRemote='',rawDataIndex:t,dynamicProtocolVersion:dynamicProtocolVersion=new Uint8Array([0x0,0x0]),isUDP:u}=a0o(o,a0f);g=addressRemote,h=portRemote+'--'+Math['random']()+'\x20'+(u?K(0x135):K(0x16b))+'\x20';if(q){j(K(0x137)+r),a0u(f);throw new Error(r);}if(u){if(portRemote===0x35)n=!![];else{j(K(0x14b)),a0u(f);throw new Error(K(0x14b));}}const v=new Uint8Array([dynamicProtocolVersion[0x0],0x0]),w=o[K(0x143)](t);if(n)return a0y(w,f,v,j);await a0m(m,addressRemote,portRemote,w,f,v,j,b,c,a0i);},'close'(){const L=I;j(L(0x1a6));},'abort'(o){const M=I;j(M(0x158),JSON['stringify'](o));}}))[I(0x13e)](o=>{const N=I;j(N(0x151),o);}),new Response(null,{'status':0x65,'webSocket':e});}async function a0m(a,b,c,d,e,f,g,h,j,k){const O=a0F;let l;try{g('[1/3\x20試行]\x20直接「突入」を試みてるぜ、'+b+':'+c+'へ！'),l=connect({'hostname':b,'port':c}),await l[O(0x181)],g(O(0x146)+b+':'+c+'への直接接続、成功だぜ！');}catch(m){console[O(0x187)](O(0x1be)+b+':'+c+'への直接接続に失敗したぜ！',m[O(0x141)]||m[O(0x161)]||m);if(k)try{g(O(0x186)+b+':'+c+'へ！');const {tcpSocket:n}=await a0C(b,c);l=n,g('[2/3\x20成功]\x20NAT64「特殊通路」経由で'+b+':'+c+O(0x159));}catch(o){console[O(0x187)](O(0x150)+b+':'+c+'へのNAT64接続も失敗したぜ！',o[O(0x141)]||o['message']||o);if(h){g(O(0x184)+h+':'+j+'へ！');try{l=connect({'hostname':h,'port':j}),await l[O(0x181)],g(O(0x182)+h+':'+j+O(0x159));}catch(p){console[O(0x187)](O(0x16f)+h+':'+j+':',p[O(0x141)]||p[O(0x161)]||p),a0u(e);return;}}else{console[O(0x187)](O(0x18d)),a0u(e);return;}}else{g(O(0x1a0));if(h){g(O(0x189)+h+':'+j+'へ！');try{l=connect({'hostname':h,'port':j}),await l['opened'],g(O(0x152)+h+':'+j+O(0x159));}catch(q){console[O(0x187)](O(0x166)+h+':'+j+':',q['stack']||q['message']||q),a0u(e);return;}}else{console[O(0x187)](O(0x198)),a0u(e);return;}}}if(l){a[O(0x178)]=l;const r=l[O(0x1b4)][O(0x154)]();await r[O(0x142)](d),r[O(0x1b6)](),a0p(l,e,f,null,g);}else console['error'](O(0x14e)),a0u(e);}function a0n(a,b,c){let d=![];const e=new ReadableStream({'start'(f){const P=a0b;a[P(0x174)](P(0x161),j=>{const Q=P;if(d)return;const k=j[Q(0x15a)];f[Q(0x17e)](k);}),a[P(0x174)](P(0x1a1),()=>{const R=P;a0u(a);if(d)return;f[R(0x1a1)]();}),a[P(0x174)]('error',j=>{const S=P;c(S(0x133)),f[S(0x187)](j);});const {earlyData:g,error:h}=a0q(b);if(h)f['error'](h);else g&&f[P(0x17e)](g);},'pull'(f){},'cancel'(f){const T=a0b;if(d)return;c(T(0x1a3)+f+'だ'),d=!![],a0u(a);}});return e;}function a0o(a,b){const U=a0F;if(a[U(0x14a)]<0x18)return{'hasError':!![],'message':U(0x1b3)};const c=new Uint8Array(a[U(0x143)](0x0,0x1));let d=![],e=![];a0x(new Uint8Array(a[U(0x143)](0x1,0x11)))===b&&(d=!![]);if(!d)return{'hasError':!![],'message':U(0x17c)};const f=new Uint8Array(a[U(0x143)](0x11,0x12))[0x0],g=new Uint8Array(a[U(0x143)](0x12+f,0x12+f+0x1))[0x0];if(g===0x1){}else{if(g===0x2)e=!![];else return{'hasError':!![],'message':'コマンド'+g+U(0x165)};}const h=0x12+f+0x1,j=a[U(0x143)](h,h+0x2),k=new DataView(j)['getUint16'](0x0);let l=h+0x2;const m=new Uint8Array(a['slice'](l,l+0x1)),n=m[0x0];let o=0x0,p=l+0x1,q='';switch(n){case 0x1:o=0x4,q=new Uint8Array(a[U(0x143)](p,p+o))[U(0x197)]('.');break;case 0x2:o=new Uint8Array(a[U(0x143)](p,p+0x1))[0x0],p+=0x1,q=new TextDecoder()[U(0x1b8)](a[U(0x143)](p,p+o));break;case 0x3:o=0x10;const r=new DataView(a[U(0x143)](p,p+o)),s=[];for(let t=0x0;t<0x8;t++){s['push'](r['getUint16'](t*0x2)[U(0x173)](0x10));}q=s[U(0x197)](':');break;default:return{'hasError':!![],'message':'「変な住所の種類」だぜ！\x20'+n+U(0x13d)};}if(!q)return{'hasError':!![],'message':'住所が空っぽだぜ、種類は'+n+U(0x1b5)};return{'hasError':![],'addressRemote':q,'addressType':n,'portRemote':k,'rawDataIndex':p+o,'dynamicProtocolVersion':c,'isUDP':e};}async function a0p(a,b,c,d,e){const V=a0F;let f=c,g=![];await a['readable'][V(0x167)](new WritableStream({'start'(){},async 'write'(h,j){const W=V;g=!![],b[W(0x17a)]!==WS_READY_STATE_OPEN&&j[W(0x187)](W(0x171)),f?(b[W(0x1b7)](await new Blob([f,h])['arrayBuffer']()),f=null):b[W(0x1b7)](h);},'close'(){const X=V;e(X(0x155)+g+'だ'),a0u(b);},'abort'(h){console['error']('リモート接続が中断されたぜ',h),a0u(b);}}))[V(0x13e)](h=>{const Y=V;console[Y(0x187)](Y(0x1a9),h[Y(0x141)]||h),a0u(b);});}function a0q(a){const Z=a0F;if(!a)return{'error':null};try{a=a['replace'](/-/g,'+')[Z(0x13c)](/_/g,'/');const b=atob(a),c=Uint8Array[Z(0x17f)](b,d=>d['charCodeAt'](0x0));return{'earlyData':c[Z(0x17d)],'error':null};}catch(d){return{'error':d};}}function a0r(a){const a0=a0F,b=/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;return b[a0(0x162)](a);}const a0s=0x1,a0t=0x2;function a0a(){const ad=['addEventListener','42UaEZcm','find','\x0a\x20\x20network:\x20ws\x0a\x20\x20tls:\x20true\x0a\x20\x20udp:\x20false\x0a\x20\x20sni:\x20','value','safeCloseWebSocketでエラーだぜ','readyState','NAT64','「お前は誰だ？」無効なユーザーだぜ！','buffer','enqueue','from','環境変数\x20隠す\x20(日本語)\x20の値:\x20','opened','[3/3\x20成功]\x20「備え」のプロキシIP経由で','accept','[3/3\x20試行]\x20NAT64もダメか…\x20「備え」のプロキシIPを試すぜ:\x20','log','[2/3\x20試行]\x20直接はダメか…\x20NAT64「特殊通路」を試すぜ、','error','環境変数\x20HIDE_SUBSCRIPTION\x20(英語)\x20の値:\x20','[2/2\x20試行]\x20直接ダメ、NAT64もオフ…\x20「備え」のプロキシIPを試すぜ:\x20','get','true','環境変数\x20PROXYIP\x20の値:\x20','[エラー]\x20NAT64もダメで、「備え」のプロキシIPもねぇ！WSを閉じちまうぜ。','DNSサーバー(','SARCASM_MESSAGE','UUID','ヘヘッ、見つけちまったか？でも見せてやらねぇよ、悔しいだろ？','307672ahbhBE','text/html;\x20charset=utf-8','json','環境変数\x20SARCASM_MESSAGE\x20(英語)\x20の値:\x20','toLowerCase','join','[エラー]\x20直接ダメ、NAT64もオフ、さらに「備え」もねぇ！WSを閉じちまうぜ。','arrayBuffer','最終的に決まった\x20回退プロキシIP:\x20','split','74540ViCGzk','pathname','皮肉なメッセージ','最終的に決まったNAT64通路有効:\x20','[NAT64スキップ]\x20NAT64はオフだ、試行をスキップするぜ。','close','44EDXbdG','読み込みストリームがキャンセルされたぜ、理由は','DNSの「問いかけ」が失敗したぜ！ステータス:\x20','d342d11e-d424-4583-b36e-524ab1f0afa4','読み込み可能WSストリームが閉じられたぜ',')のTCPが中断されたぜ','readable','remoteSocketToWSで「事件」が起きたぜ\x20','\x0a\x20\x20name:\x20','?encryption=none&security=tls&sni=','NAT64のDNS解決に失敗したぜ:\x20','push','ここには何もねぇぜ！','1990170bcURRB','abort','PROXYIP','AbortError','「無効なデータ」だぜ！','writable','なのに！','releaseLock','send','decode','\x0a\x20\x20server:\x20','ドメインのAレコードが見つからねぇか、IPv4住所が解決できねぇぜ。','\x0a\x20\x20client-fingerprint:\x20chrome\x0a\x20\x20ws-opts:\x0a\x20\x20\x20\x20path:\x20\x22/?ed=2048\x22\x0a\x20\x20\x20\x20headers:\x0a\x20\x20\x20\x20\x20\x20host:\x20','10FeOkjF','status','[1/3\x20エラー]\x20','webSocketサーバーでエラーが出たぜ！',':443','udp\x20','4231818FGOccb','VLESSの「暗号」解析でエラーだぜ:\x20','signal','<!DOCTYPE\x20html>\x0a\x20\x20\x20\x20\x20\x20\x20<html>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20<head><title>ようこそ、兄弟たち！</title></head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20<body><h1>大王様のCloudflare\x20Workerは、もう「稼働中」だぜ！</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>これは「ダミー」のページだ。（本物は「隠れてる」ぞ）</p></body>\x0a\x20\x20\x20\x20\x20\x20\x20</html>','大王様もビックリだぜ、エラーが出ちまった！：','1821867OIwXdn','replace','は知らない！','catch','Answer','type','stack','write','slice','ess','length','[1/3\x20成功]\x20','https://1.1.1.1/dns-query?name=',')のTCP���閉じられたぜ','2602:fc59:b0:64::','byteLength','UDPの代理はDNSポート53だけだぜ！','proxyip.zone.id','text/plain;charset=utf-8','どの手を使ってもTCPソケットが繋がらねぇ！WSを閉じちまうぜ。','&type=A','[2/3\x20エラー]\x20','読み込み可能WSストリームのパイプエラーだぜ','[2/2\x20成功]\x20「備え」のプロキシIP経由で','124862dcnLQC','getWriter','リモート接続が閉じられたぜ、受信データありは','handleDNSQueryで「事件」が起きたぜ、エラー:\x20','&path=%2F%3Fed%3D2048#','読み込み可能WSストリームが中断されたぜ','に接続、成功だぜ！','data','HIDE_SUBSCRIPTION','最終的に決まった隠蔽設定:\x20','Host','文字列化されたUUIDは「偽物」だぜ！','headers','最終的に決まった\x20回退プロキシポート:\x20','message','test','\x0a---------------------------------------------------------------\x0a################################################################\x0aclash-meta\x0a---------------------------------------------------------------\x0a-\x20type:\x20','環境変数\x20皮肉なメッセージ\x20(日本語)\x20の値:\x20','は「知らない」ぜ、01はTCP、02はUDP、03はMUXだ！','[2/2\x20エラー]\x20「備え」のプロキシIPへの回退も失敗したぜ！\x20','pipeTo','values','9WqAfUr','2439767zWHZCI','tcp\x20','\x0a################################################################\x0av2ray\x0a---------------------------------------------------------------\x0a','Upgrade','websocket','[3/3\x20エラー]\x20「備え」のプロキシIPへの回退も失敗したぜ！\x20','\x0a---------------------------------------------------------------\x0a################################################################\x0a','webSocketが「開いてねぇ」ぞ、たぶん閉じちまったな！','map','toString'];a0a=function(){return ad;};return a0a();}function a0u(a){const a1=a0F;try{(a[a1(0x17a)]===a0s||a[a1(0x17a)]===a0t)&&a[a1(0x1a1)]();}catch(b){console['error'](a1(0x179),b);}}const a0v=[];for(let a0D=0x0;a0D<0x100;++a0D){a0v[a0F(0x1ad)]((a0D+0x100)[a0F(0x173)](0x10)[a0F(0x143)](0x1));}function a0w(a,b=0x0){const a2=a0F;return(a0v[a[b+0x0]]+a0v[a[b+0x1]]+a0v[a[b+0x2]]+a0v[a[b+0x3]]+'-'+a0v[a[b+0x4]]+a0v[a[b+0x5]]+'-'+a0v[a[b+0x6]]+a0v[a[b+0x7]]+'-'+a0v[a[b+0x8]]+a0v[a[b+0x9]]+'-'+a0v[a[b+0xa]]+a0v[a[b+0xb]]+a0v[a[b+0xc]]+a0v[a[b+0xd]]+a0v[a[b+0xe]]+a0v[a[b+0xf]])[a2(0x196)]();}function a0x(a,b=0x0){const a3=a0F,c=a0w(a,b);if(!a0r(c))throw TypeError(a3(0x15e));return c;}async function a0y(a,b,c,d){const a4=a0F;try{const e='8.8.8.8',f=0x35;let g=c;const h=connect({'hostname':e,'port':f});d(e+':'+f+'に繋がったぜ！');const j=h[a4(0x1b4)][a4(0x154)]();await j[a4(0x142)](a),j[a4(0x1b6)](),await h[a4(0x1a8)][a4(0x167)](new WritableStream({async 'write'(k){const a5=a4;b[a5(0x17a)]===a0s&&(g?(b['send'](await new Blob([g,k])[a5(0x199)]()),g=null):b[a5(0x1b7)](k));},'close'(){const a6=a4;d('DNSサーバー('+e+a6(0x148));},'abort'(k){const a7=a4;console[a7(0x187)](a7(0x18e)+e+a7(0x1a7),k);}}));}catch(k){console[a4(0x187)](a4(0x156)+k[a4(0x161)]);}}function a0z(a,b){const a8=a0F,c=a0c+a0d,d=''+c+a0e+a+'@'+b+a8(0x134)+(a8(0x1ab)+b+'&fp=randomized&type=ws&host='+b+a8(0x157)+b);return a8(0x16c)+d+a8(0x163)+c+a8(0x1aa)+b+a8(0x1b9)+b+'\x0a\x20\x20port:\x20443\x0a\x20\x20uuid:\x20'+a+a8(0x177)+b+a8(0x1bb)+b+a8(0x170);}function a0A(a){const a9=a0F,b=a[a9(0x19b)]('.');if(b[a9(0x145)]!==0x4)throw new Error('NAT64変換には「ちゃんとした」IPv4住所が必要だぜ！');const c=b[a9(0x172)](d=>{const aa=a9,e=parseInt(d,0xa);if(e<0x0||e>0xff)throw new Error('NAT64変換のためのIPv4住所がおかしいぜ！');return e[aa(0x173)](0x10)['padStart'](0x2,'0');});return a9(0x149)+c[0x0]+c[0x1]+':'+c[0x2]+c[0x3];}async function a0B(a){const ab=a0F,b=new AbortController(),c=setTimeout(()=>b[ab(0x1b0)](),0x1388);try{const d=await fetch(ab(0x147)+a+ab(0x14f),{'headers':{'Accept':'application/dns-json'},'signal':b[ab(0x138)]});clearTimeout(c);if(!d['ok'])throw new Error(ab(0x1a4)+d[ab(0x1bd)]);const e=await d[ab(0x194)]();if(e[ab(0x13f)]&&e[ab(0x13f)][ab(0x145)]>0x0){const f=e[ab(0x13f)][ab(0x176)](g=>g[ab(0x140)]===0x1);if(f){const g=f[ab(0x15a)];return a0A(g);}}throw new Error(ab(0x1ba));}catch(h){clearTimeout(c);if(h['name']===ab(0x1b2))throw new Error('NAT64のDNS解決がタイムアウトしたぜ、ドメイン:\x20'+a);throw new Error(ab(0x1ac)+h[ab(0x161)]);}}async function a0C(a,b){const ac=a0F;let c;const d=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;d[ac(0x162)](a)?c=a0A(a):c=await a0B(a);const e=connect({'hostname':'['+c+']','port':b});return await e['opened'],{'tcpSocket':e};}