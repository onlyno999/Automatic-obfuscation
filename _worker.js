const a0z=a0b;(function(a,b){const y=a0b,c=a();while(!![]){try{const d=-parseInt(y(0x1ad))/0x1+parseInt(y(0x1b3))/0x2+-parseInt(y(0x1b0))/0x3*(-parseInt(y(0x177))/0x4)+parseInt(y(0x1a7))/0x5*(parseInt(y(0x1b2))/0x6)+parseInt(y(0x1ab))/0x7+parseInt(y(0x17a))/0x8+parseInt(y(0x1a0))/0x9*(-parseInt(y(0x1a9))/0xa);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a0a,0xb196d));import{connect}from'cloudflare:sockets';let a0c=a0z(0x18f),a0d='wok.woxxxxxx.nyc.mn';if(!a0k(a0c))throw new Error(a0z(0x1c5));export default{async 'fetch'(a,b,c){const A=a0z;try{a0c=a0c,a0d=a0d;const d=a['headers'][A(0x1c4)]('Upgrade');if(!d||d!==A(0x184)){const f=new URL(a[A(0x19a)]);switch(f[A(0x1b4)]){case'/':return new Response(JSON['stringify'](a['cf']),{'status':0xc8});case'/'+a0c:{const g=a0s(a0c,a[A(0x1bd)][A(0x1c4)](A(0x1a5)));return new Response(''+g,{'status':0xc8,'headers':{'Content-Type':A(0x188)}});}default:return new Response(A(0x1b7),{'status':0x194});}}else return await a0e(a);}catch(h){let j=h;return new Response(j[A(0x196)]());}}};function a0a(){const a1=['command\x20','enqueue','765688sbEIJE','readableWebSocketStream\x20is\x20abort','safeCloseWebSocket\x20error','replace','?encryption=none&security=tls&sni=','retry','vless','values','getUint16','catch','websocket','Stringified\x20UUID\x20is\x20invalid','invalid\x20data',':443','text/plain;charset=utf-8','connected\x20to\x20','\x0a\x20\x20server:\x20','readableWebSocketStream\x20pipeTo\x20error','arrayBuffer','value','application/dns-message','d342d11e-d424-4583-b36e-524ab1f0af5','random','charCodeAt','remoteConnection!.readable\x20abort','&fp=randomized&type=ws&host=','https://1.1.1.1/dns-query','doh\x20success\x20and\x20dns\x20message\x20length\x20is\x20','toString','byteLength','ReadableStream\x20was\x20canceled,\x20due\x20to\x20','\x0a---------------------------------------------------------------\x0a################################################################\x0aclash-meta\x0a---------------------------------------------------------------\x0a-\x20type:\x20vless\x0a\x20\x20name:\x20','url','push','write','remoteSocketToWS\x20has\x20exception\x20','from','addEventListener','69750KFmDOT','webSocketServer\x20has\x20error','\x0a\x20\x20port:\x20443\x0a\x20\x20uuid:\x20','POST','readyState','Host','join','5435515SlrZZp','readableWebSocketStream\x20is\x20close','2930VNAtst','webSocket.readyState\x20is\x20not\x20open,\x20maybe\x20close','7998018meemPH','releaseLock','1064150NnyvfZ','writable','getWriter','555267OVvfQJ','slice','6FRzHLj','1993122oRQGmO','pathname','invild\x20\x20addressType\x20is\x20','udp\x20','Not\x20found','stack','://','close','decode','sec-websocket-protocol','headers','\x0a################################################################\x0av2ray\x0a---------------------------------------------------------------\x0a','stringify','\x0a\x20\x20network:\x20ws\x0a\x20\x20tls:\x20true\x0a\x20\x20udp:\x20false\x0a\x20\x20sni:\x20','pipeTo','readable','send','get','uuid\x20is\x20not\x20valid','remoteConnection!.readable\x20is\x20close\x20with\x20hasIncomingData\x20is\x20','error','closed','&path=%2F%3Fed%3D2048#','retry\x20tcpSocket\x20closed\x20error','data','16SNEYhp'];a0a=function(){return a1;};return a0a();}async function a0e(a){const B=a0z,b=new WebSocketPair(),[c,d]=Object[B(0x181)](b);d['accept']();let e='',f='';const g=(n,o)=>{console['log']('['+e+':'+f+']\x20'+n,o||'');},h=a[B(0x1bd)]['get'](B(0x1bc))||'',j=a0g(d,h,g);let k={'value':null},l=null,m=![];return j[B(0x1c1)](new WritableStream({async 'write'(n,o){const C=B;if(m&&l)return l(n);if(k[C(0x18d)]){const v=k['value']['writable']['getWriter']();await v['write'](n),v[C(0x1ac)]();return;}const {hasError:p,message:q,portRemote:portRemote=0x1bb,addressRemote:addressRemote='',rawDataIndex:r,vlessVersion:vlessVersion=new Uint8Array([0x0,0x0]),isUDP:s}=a0h(n,a0c);e=addressRemote,f=portRemote+'--'+Math[C(0x190)]()+'\x20'+(s?C(0x1b6):'tcp\x20')+'\x20';if(p){throw new Error(q);return;}if(s){if(portRemote===0x35)m=!![];else{throw new Error('UDP\x20proxy\x20only\x20enable\x20for\x20DNS\x20which\x20is\x20port\x2053');return;}}const t=new Uint8Array([vlessVersion[0x0],0x0]),u=n[C(0x1b1)](r);if(m){const {write:w}=await a0r(d,t,g);l=w,l(u);return;}a0f(k,addressRemote,portRemote,u,d,t,g);},'close'(){const D=B;g(D(0x1a8));},'abort'(n){const E=B;g(E(0x17b),JSON[E(0x1bf)](n));}}))[B(0x183)](n=>{const F=B;g(F(0x18b),n);}),new Response(null,{'status':0x65,'webSocket':c});}async function a0f(a,b,c,d,e,f,g){async function h(l,m){const G=a0b,n=connect({'hostname':l,'port':m});a[G(0x18d)]=n,g(G(0x189)+l+':'+m);const o=n['writable']['getWriter']();return await o[G(0x19c)](d),o[G(0x1ac)](),n;}async function j(){const H=a0b,l=await h(a0d||b,c);l[H(0x173)][H(0x183)](m=>{const I=H;console['log'](I(0x175),m);})['finally'](()=>{a0n(e);}),a0i(l,e,f,null,g);}const k=await h(b,c);a0i(k,e,f,j,g);}function a0g(a,b,c){let d=![];const e=new ReadableStream({'start'(f){const J=a0b;a[J(0x19f)]('message',j=>{const K=J;if(d)return;const k=j[K(0x176)];f[K(0x179)](k);}),a[J(0x19f)](J(0x1ba),()=>{const L=J;a0n(a);if(d)return;f[L(0x1ba)]();}),a[J(0x19f)](J(0x172),j=>{const M=J;c(M(0x1a1)),f[M(0x172)](j);});const {earlyData:g,error:h}=a0j(b);if(h)f[J(0x172)](h);else g&&f[J(0x179)](g);},'pull'(f){},'cancel'(f){const N=a0b;if(d)return;c(N(0x198)+f),d=!![],a0n(a);}});return e;}function a0h(a,b){const O=a0z;if(a['byteLength']<0x18)return{'hasError':!![],'message':O(0x186)};const c=new Uint8Array(a[O(0x1b1)](0x0,0x1));let d=![],e=![];a0q(new Uint8Array(a[O(0x1b1)](0x1,0x11)))===b&&(d=!![]);if(!d)return{'hasError':!![],'message':'invalid\x20user'};const f=new Uint8Array(a[O(0x1b1)](0x11,0x12))[0x0],g=new Uint8Array(a['slice'](0x12+f,0x12+f+0x1))[0x0];if(g===0x1){}else{if(g===0x2)e=!![];else return{'hasError':!![],'message':O(0x178)+g+'\x20is\x20not\x20support,\x20command\x2001-tcp,02-udp,03-mux'};}const h=0x12+f+0x1,j=a['slice'](h,h+0x2),k=new DataView(j)[O(0x182)](0x0);let l=h+0x2;const m=new Uint8Array(a[O(0x1b1)](l,l+0x1)),n=m[0x0];let o=0x0,p=l+0x1,q='';switch(n){case 0x1:o=0x4,q=new Uint8Array(a[O(0x1b1)](p,p+o))[O(0x1a6)]('.');break;case 0x2:o=new Uint8Array(a['slice'](p,p+0x1))[0x0],p+=0x1,q=new TextDecoder()[O(0x1bb)](a[O(0x1b1)](p,p+o));break;case 0x3:o=0x10;const r=new DataView(a[O(0x1b1)](p,p+o)),s=[];for(let t=0x0;t<0x8;t++){s[O(0x19b)](r['getUint16'](t*0x2)[O(0x196)](0x10));}q=s[O(0x1a6)](':');break;default:return{'hasError':!![],'message':O(0x1b5)+n};}if(!q)return{'hasError':!![],'message':'addressValue\x20is\x20empty,\x20addressType\x20is\x20'+n};return{'hasError':![],'addressRemote':q,'addressType':n,'portRemote':k,'rawDataIndex':p+o,'vlessVersion':c,'isUDP':e};}async function a0i(a,b,c,d,e){const P=a0z;let f=0x0,g=[],h=c,j=![];await a['readable'][P(0x1c1)](new WritableStream({'start'(){},async 'write'(k,l){const Q=P;j=!![],b[Q(0x1a4)]!==a0l&&l[Q(0x172)](Q(0x1aa)),h?(b['send'](await new Blob([h,k])[Q(0x18c)]()),h=null):b[Q(0x1c3)](k);},'close'(){const R=P;e(R(0x1c6)+j);},'abort'(k){const S=P;console['error'](S(0x192),k);}}))['catch'](k=>{const T=P;console[T(0x172)](T(0x19d),k[T(0x1b8)]||k),a0n(b);}),j===![]&&d&&(e(P(0x17f)),d());}function a0j(a){const U=a0z;if(!a)return{'error':null};try{a=a[U(0x17d)](/-/g,'+')[U(0x17d)](/_/g,'/');const b=atob(a),c=Uint8Array[U(0x19e)](b,d=>d[U(0x191)](0x0));return{'earlyData':c['buffer'],'error':null};}catch(d){return{'error':d};}}function a0k(a){const b=/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;return b['test'](a);}const a0l=0x1,a0m=0x2;function a0n(a){const V=a0z;try{(a[V(0x1a4)]===a0l||a[V(0x1a4)]===a0m)&&a[V(0x1ba)]();}catch(b){console[V(0x172)](V(0x17c),b);}}const a0o=[];for(let a0x=0x0;a0x<0x100;++a0x){a0o[a0z(0x19b)]((a0x+0x100)[a0z(0x196)](0x10)[a0z(0x1b1)](0x1));}function a0p(a,b=0x0){return(a0o[a[b+0x0]]+a0o[a[b+0x1]]+a0o[a[b+0x2]]+a0o[a[b+0x3]]+'-'+a0o[a[b+0x4]]+a0o[a[b+0x5]]+'-'+a0o[a[b+0x6]]+a0o[a[b+0x7]]+'-'+a0o[a[b+0x8]]+a0o[a[b+0x9]]+'-'+a0o[a[b+0xa]]+a0o[a[b+0xb]]+a0o[a[b+0xc]]+a0o[a[b+0xd]]+a0o[a[b+0xe]]+a0o[a[b+0xf]])['toLowerCase']();}function a0q(a,b=0x0){const W=a0z,c=a0p(a,b);if(!a0k(c))throw TypeError(W(0x185));return c;}async function a0r(a,b,c){const Y=a0z;let d=![];const e=new TransformStream({'start'(g){},'transform'(g,h){const X=a0b;for(let j=0x0;j<g[X(0x197)];){const k=g['slice'](j,j+0x2),l=new DataView(k)[X(0x182)](0x0),m=new Uint8Array(g['slice'](j+0x2,j+0x2+l));j=j+0x2+l,h['enqueue'](m);}},'flush'(g){}});e[Y(0x1c2)][Y(0x1c1)](new WritableStream({async 'write'(g){const Z=Y,h=await fetch(Z(0x194),{'method':Z(0x1a3),'headers':{'content-type':Z(0x18e)},'body':g}),j=await h[Z(0x18c)](),k=j[Z(0x197)],l=new Uint8Array([k>>0x8&0xff,k&0xff]);a[Z(0x1a4)]===a0l&&(c(Z(0x195)+k),d?a['send'](await new Blob([l,j])['arrayBuffer']()):(a[Z(0x1c3)](await new Blob([b,l,j])['arrayBuffer']()),d=!![]));}}))[Y(0x183)](g=>{c('dns\x20udp\x20has\x20error'+g);});const f=e[Y(0x1ae)][Y(0x1af)]();return{'write'(g){f['write'](g);}};}function a0b(a,b){a=a-0x172;const c=a0a();let d=c[a];return d;}function a0s(a,b){const a0=a0z,c=a0(0x180),d=''+c+(a0(0x1b9)+a+'@'+b+a0(0x187))+(a0(0x17e)+b+a0(0x193)+b+a0(0x174)+b);return a0(0x1be)+d+a0(0x199)+b+a0(0x18a)+b+a0(0x1a2)+a+a0(0x1c0)+b+'\x0a\x20\x20client-fingerprint:\x20chrome\x0a\x20\x20ws-opts:\x0a\x20\x20\x20\x20path:\x20\x22/?ed=2048\x22\x0a\x20\x20\x20\x20headers:\x0a\x20\x20\x20\x20\x20\x20host:\x20'+b+'\x0a---------------------------------------------------------------\x0a################################################################\x0a';}