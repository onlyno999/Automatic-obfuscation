const a0T=a0b;(function(a,b){const y=a0b,c=a();while(!![]){try{const d=-parseInt(y(0x1c7))/0x1+parseInt(y(0x186))/0x2+-parseInt(y(0x19e))/0x3*(parseInt(y(0x1a1))/0x4)+-parseInt(y(0x192))/0x5*(-parseInt(y(0x1a3))/0x6)+-parseInt(y(0x1a7))/0x7*(parseInt(y(0x1b4))/0x8)+parseInt(y(0x1c9))/0x9*(-parseInt(y(0x199))/0xa)+-parseInt(y(0x18d))/0xb*(-parseInt(y(0x197))/0xc);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a0a,0x3a0a4));import{connect}from'cloudflare:sockets';let a0c='87d1bfd4-574e-4c96-ad42-0426f27461ff',a0d='wok.woxxxxxx.nyc.mn';if(!a0k(a0c))throw new Error('uuid\x20is\x20not\x20valid');export default{async 'fetch'(a,b,c){const z=a0b;try{a0c=a0c,a0d=a0d;const d=a[z(0x182)][z(0x1b1)](z(0x1af));if(!d||d!==z(0x1b7)){const f=new URL(a[z(0x1ba)]);switch(f[z(0x1c8)]){case'/':return new Response(JSON['stringify'](a['cf']),{'status':0xc8});case'/'+a0c:{const g=a0s(a0c,a[z(0x182)][z(0x1b1)](z(0x1be)));return new Response(''+g,{'status':0xc8,'headers':{'Content-Type':z(0x1ab)}});}default:return new Response(z(0x18f),{'status':0x194});}}else return await a0e(a);}catch(h){let j=h;return new Response(j[z(0x1aa)]());}}};async function a0e(a){const A=a0b,b=new WebSocketPair(),[c,d]=Object[A(0x1b8)](b);d[A(0x18b)]();let e='',f='';const g=(n,o)=>{console['log']('['+e+':'+f+']\x20'+n,o||'');},h=a[A(0x182)][A(0x1b1)]('sec-websocket-protocol')||'',j=a0g(d,h,g);let k={'value':null},l=null,m=![];return j['pipeTo'](new WritableStream({async 'write'(n,o){const B=A;if(m&&l)return l(n);if(k[B(0x1b5)]){const v=k[B(0x1b5)]['writable'][B(0x184)]();await v[B(0x180)](n),v[B(0x19d)]();return;}const {hasError:p,message:q,portRemote:portRemote=0x1bb,addressRemote:addressRemote='',rawDataIndex:r,vlessVersion:vlessVersion=new Uint8Array([0x0,0x0]),isUDP:s}=a0h(n,a0c);e=addressRemote,f=portRemote+'--'+Math[B(0x1a5)]()+'\x20'+(s?B(0x1a6):'tcp\x20')+'\x20';if(p){throw new Error(q);return;}if(s){if(portRemote===0x35)m=!![];else{throw new Error('UDP\x20proxy\x20only\x20enable\x20for\x20DNS\x20which\x20is\x20port\x2053');return;}}const t=new Uint8Array([vlessVersion[0x0],0x0]),u=n[B(0x183)](r);if(m){const {write:w}=await a0r(d,t,g);l=w,l(u);return;}a0f(k,addressRemote,portRemote,u,d,t,g);},'close'(){const C=A;g(C(0x196));},'abort'(n){g('readableWebSocketStream\x20is\x20abort',JSON['stringify'](n));}}))[A(0x1ad)](n=>{g('readableWebSocketStream\x20pipeTo\x20error',n);}),new Response(null,{'status':0x65,'webSocket':c});}async function a0f(a,b,c,d,e,f,g){async function h(l,m){const D=a0b,n=connect({'hostname':l,'port':m});a[D(0x1b5)]=n,g(D(0x1a8)+l+':'+m);const o=n[D(0x17d)][D(0x184)]();return await o[D(0x180)](d),o[D(0x19d)](),n;}async function j(){const E=a0b,l=await h(a0d||b,c);l[E(0x1a9)]['catch'](m=>{const F=E;console[F(0x1bd)](F(0x1c6),m);})[E(0x187)](()=>{a0n(e);}),a0i(l,e,f,null,g);}const k=await h(b,c);a0i(k,e,f,j,g);}function a0b(a,b){a=a-0x178;const c=a0a();let d=c[a];return d;}function a0g(a,b,c){let d=![];const e=new ReadableStream({'start'(f){const G=a0b;a[G(0x1a2)]('message',j=>{if(d)return;const k=j['data'];f['enqueue'](k);}),a[G(0x1a2)](G(0x1c3),()=>{const H=G;a0n(a);if(d)return;f[H(0x1c3)]();}),a[G(0x1a2)](G(0x1c5),j=>{const I=G;c(I(0x190)),f[I(0x1c5)](j);});const {earlyData:g,error:h}=a0j(b);if(h)f[G(0x1c5)](h);else g&&f['enqueue'](g);},'pull'(f){},'cancel'(f){const J=a0b;if(d)return;c(J(0x17c)+f),d=!![],a0n(a);}});return e;}function a0h(a,b){const K=a0b;if(a['byteLength']<0x18)return{'hasError':!![],'message':K(0x191)};const c=new Uint8Array(a[K(0x183)](0x0,0x1));let d=![],e=![];a0q(new Uint8Array(a['slice'](0x1,0x11)))===b&&(d=!![]);if(!d)return{'hasError':!![],'message':K(0x1ac)};const f=new Uint8Array(a[K(0x183)](0x11,0x12))[0x0],g=new Uint8Array(a[K(0x183)](0x12+f,0x12+f+0x1))[0x0];if(g===0x1){}else{if(g===0x2)e=!![];else return{'hasError':!![],'message':K(0x18a)+g+K(0x19c)};}const h=0x12+f+0x1,j=a['slice'](h,h+0x2),k=new DataView(j)['getUint16'](0x0);let l=h+0x2;const m=new Uint8Array(a[K(0x183)](l,l+0x1)),n=m[0x0];let o=0x0,p=l+0x1,q='';switch(n){case 0x1:o=0x4,q=new Uint8Array(a['slice'](p,p+o))[K(0x181)]('.');break;case 0x2:o=new Uint8Array(a[K(0x183)](p,p+0x1))[0x0],p+=0x1,q=new TextDecoder()[K(0x1ca)](a[K(0x183)](p,p+o));break;case 0x3:o=0x10;const r=new DataView(a['slice'](p,p+o)),s=[];for(let t=0x0;t<0x8;t++){s['push'](r[K(0x17b)](t*0x2)[K(0x1aa)](0x10));}q=s[K(0x181)](':');break;default:return{'hasError':!![],'message':K(0x189)+n};}if(!q)return{'hasError':!![],'message':K(0x195)+n};return{'hasError':![],'addressRemote':q,'addressType':n,'portRemote':k,'rawDataIndex':p+o,'vlessVersion':c,'isUDP':e};}function a0a(){const Z=['getUint16','ReadableStream\x20was\x20canceled,\x20due\x20to\x20','writable','from','replace','write','join','headers','slice','getWriter','dns\x20udp\x20has\x20error','514072fZebwk','finally','\x0a################################################################\x0av2ray\x0a---------------------------------------------------------------\x0a','invild\x20\x20addressType\x20is\x20','command\x20','accept','stack','11759CwwCNH','pipeTo','Not\x20found','webSocketServer\x20has\x20error','invalid\x20data','5PoUIrL','://','buffer','addressValue\x20is\x20empty,\x20addressType\x20is\x20','readableWebSocketStream\x20is\x20close','7932ePDpWe','webSocket.readyState\x20is\x20not\x20open,\x20maybe\x20close','4270vwpDxh','\x0a---------------------------------------------------------------\x0a################################################################\x0a','vless','\x20is\x20not\x20support,\x20command\x2001-tcp,02-udp,03-mux','releaseLock','1257njAVss','retry','?encryption=none&security=tls&sni=','1012QfNofG','addEventListener','1993914NpcThw','byteLength','random','udp\x20','243061NPrHaC','connected\x20to\x20','closed','toString','text/plain;charset=utf-8','invalid\x20user','catch','remoteConnection!.readable\x20abort','Upgrade','safeCloseWebSocket\x20error','get','readyState','send','32yVjdNs','value','push','websocket','values','charCodeAt','url','test','doh\x20success\x20and\x20dns\x20message\x20length\x20is\x20','log','Host','\x0a\x20\x20port:\x20443\x0a\x20\x20uuid:\x20','readable','application/dns-message','\x0a\x20\x20server:\x20','close','&fp=randomized&type=ws&host=','error','retry\x20tcpSocket\x20closed\x20error','468744AKaNSo','pathname','7263TyNhKj','decode','POST','arrayBuffer','remoteConnection!.readable\x20is\x20close\x20with\x20hasIncomingData\x20is\x20'];a0a=function(){return Z;};return a0a();}async function a0i(a,b,c,d,e){const L=a0b;let f=0x0,g=[],h=c,j=![];await a[L(0x1c0)][L(0x18e)](new WritableStream({'start'(){},async 'write'(k,l){const M=L;j=!![],b[M(0x1b2)]!==a0l&&l[M(0x1c5)](M(0x198)),h?(b['send'](await new Blob([h,k])['arrayBuffer']()),h=null):b[M(0x1b3)](k);},'close'(){const N=L;e(N(0x17a)+j);},'abort'(k){const O=L;console[O(0x1c5)](O(0x1ae),k);}}))[L(0x1ad)](k=>{const P=L;console['error']('remoteSocketToWS\x20has\x20exception\x20',k[P(0x18c)]||k),a0n(b);}),j===![]&&d&&(e(L(0x19f)),d());}function a0j(a){const Q=a0b;if(!a)return{'error':null};try{a=a['replace'](/-/g,'+')[Q(0x17f)](/_/g,'/');const b=atob(a),c=Uint8Array[Q(0x17e)](b,d=>d[Q(0x1b9)](0x0));return{'earlyData':c[Q(0x194)],'error':null};}catch(d){return{'error':d};}}function a0k(a){const R=a0b,b=/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;return b[R(0x1bb)](a);}const a0l=0x1,a0m=0x2;function a0n(a){const S=a0b;try{(a['readyState']===a0l||a['readyState']===a0m)&&a[S(0x1c3)]();}catch(b){console[S(0x1c5)](S(0x1b0),b);}}const a0o=[];for(let a0x=0x0;a0x<0x100;++a0x){a0o[a0T(0x1b6)]((a0x+0x100)[a0T(0x1aa)](0x10)[a0T(0x183)](0x1));}function a0p(a,b=0x0){return(a0o[a[b+0x0]]+a0o[a[b+0x1]]+a0o[a[b+0x2]]+a0o[a[b+0x3]]+'-'+a0o[a[b+0x4]]+a0o[a[b+0x5]]+'-'+a0o[a[b+0x6]]+a0o[a[b+0x7]]+'-'+a0o[a[b+0x8]]+a0o[a[b+0x9]]+'-'+a0o[a[b+0xa]]+a0o[a[b+0xb]]+a0o[a[b+0xc]]+a0o[a[b+0xd]]+a0o[a[b+0xe]]+a0o[a[b+0xf]])['toLowerCase']();}function a0q(a,b=0x0){const c=a0p(a,b);if(!a0k(c))throw TypeError('Stringified\x20UUID\x20is\x20invalid');return c;}async function a0r(a,b,c){const V=a0T;let d=![];const e=new TransformStream({'start'(g){},'transform'(g,h){const U=a0b;for(let j=0x0;j<g[U(0x1a4)];){const k=g['slice'](j,j+0x2),l=new DataView(k)[U(0x17b)](0x0),m=new Uint8Array(g[U(0x183)](j+0x2,j+0x2+l));j=j+0x2+l,h['enqueue'](m);}},'flush'(g){}});e[V(0x1c0)]['pipeTo'](new WritableStream({async 'write'(g){const W=V,h=await fetch('https://1.1.1.1/dns-query',{'method':W(0x178),'headers':{'content-type':W(0x1c1)},'body':g}),j=await h[W(0x179)](),k=j[W(0x1a4)],l=new Uint8Array([k>>0x8&0xff,k&0xff]);a[W(0x1b2)]===a0l&&(c(W(0x1bc)+k),d?a['send'](await new Blob([l,j])[W(0x179)]()):(a[W(0x1b3)](await new Blob([b,l,j])['arrayBuffer']()),d=!![]));}}))[V(0x1ad)](g=>{const X=V;c(X(0x185)+g);});const f=e[V(0x17d)][V(0x184)]();return{'write'(g){f['write'](g);}};}function a0s(a,b){const Y=a0T,c=Y(0x19b),d=''+c+(Y(0x193)+a+'@'+b+':443')+(Y(0x1a0)+b+Y(0x1c4)+b+'&path=%2F%3Fed%3D2048#'+b);return Y(0x188)+d+'\x0a---------------------------------------------------------------\x0a################################################################\x0aclash-meta\x0a---------------------------------------------------------------\x0a-\x20type:\x20vless\x0a\x20\x20name:\x20'+b+Y(0x1c2)+b+Y(0x1bf)+a+'\x0a\x20\x20network:\x20ws\x0a\x20\x20tls:\x20true\x0a\x20\x20udp:\x20false\x0a\x20\x20sni:\x20'+b+'\x0a\x20\x20client-fingerprint:\x20chrome\x0a\x20\x20ws-opts:\x0a\x20\x20\x20\x20path:\x20\x22/?ed=2048\x22\x0a\x20\x20\x20\x20headers:\x0a\x20\x20\x20\x20\x20\x20host:\x20'+b+Y(0x19a);}